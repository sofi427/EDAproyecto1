package proyecto1;

import java.util.HashMap;
import java.util.List;

public class Main {
    public static void main(String[] args) {
    	Teclado teclado = new Teclado();
    	String comando;
    	
    	System.out.println("===Consola de comandos===");
    	System.out.println("Escribir salir para terminar");
    	
    	while(true) {
    		System.out.println("> ");
    		comando = teclado.getScanner().nextLine().trim();
    		
    		if (comando.equals("salir")) {
    			System.out.println("Saliendo del programa...");
    			break;
    		}
    		switch(comando) {
    		case "comandos":
    			System.out.println("Estos son los comandos que reconoce la consola: ");
    			System.out.println("Método publicacinesOrdenadas() (clase repositorio) == publicacionesOrdenadas ");
    			break;
    		case "publicacionesOrdenadas": 
    			testListaVacia();
    			testUnaPublicacion();
    			testDosPublicacionesOrdenadas();
    			testDosPublicacionesDesordenadas();
    			break;
    		}

    			
    		
    	}
    }
    
    private static void testListaVacia() { // Es static para poder ejecutarlo desde main
    	RepositorioPublicaciones repositorio = new RepositorioPublicaciones();
        HashMap<String, Publicacion> resultado = repositorio.getPublicacionesOrdenadas();
        System.out.println("Test lista vacía: " + (resultado.isEmpty() ? "OK" : "FALLÓ"));
    }
    
    private static void testUnaPublicacion() {
    	RepositorioPublicaciones repositorio = new RepositorioPublicaciones();
    	repositorio.anadirPublicacion("1", "A");
    	HashMap<String, Publicacion> resultado = repositorio.getPublicacionesOrdenadas();
    	for(String clave : resultado.keySet()) {
        	Publicacion res = resultado.get(clave);
        	String tit = res.getTitulo();
    		System.out.println("ID: " + res.getId() + "  Título: " + tit);
    	}
    }
    
    private static void testDosPublicacionesOrdenadas() {
    	RepositorioPublicaciones repositorio = new RepositorioPublicaciones();
    	repositorio.anadirPublicacion("1", "A");
        repositorio.anadirPublicacion("2", "B");
        HashMap<String, Publicacion> resultado = repositorio.getPublicacionesOrdenadas();
        System.out.println("Test publicaciones ordenadas");
        System.out.println();
        for(String clave : resultado.keySet()) {
        	Publicacion res = resultado.get(clave);
        	String tit = res.getTitulo();
    		System.out.println("ID: " + res.getId() + "  Título: " + tit);
        }
    }
    
    private static void testDosPublicacionesDesordenadas() {
    	RepositorioPublicaciones repositorio = new RepositorioPublicaciones();
    	repositorio.anadirPublicacion("1", "B");
        repositorio.anadirPublicacion("2", "A");
        HashMap<String, Publicacion> resultado = repositorio.getPublicacionesOrdenadas();
        System.out.println("Test publicaciones desordenadas");
        System.out.println();
        for(String clave : resultado.keySet()) {
        	Publicacion res = resultado.get(clave);
        	String tit = res.getTitulo();
    		System.out.println("ID: " + res.getId() + "  Título: " + tit);
        }
    }
}

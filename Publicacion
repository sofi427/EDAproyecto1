package proyecto1;
import java.util.HashMap;

public class Publicacion {
	private String id;
	private String titulo;
	private HashMap<String, Cita> listaCitas;
	private HashMap<String, Autor> listaAutores;
	
	public Publicacion(String pId, String pTitulo) {
		this.id = pId;
		this.titulo = pTitulo;
		this.listaCitas= new HashMap <String, Cita>();
		this.listaAutores= new HashMap <String, Autor>();
	}
	
	public HashMap<String, Cita> getListaCitas() {
		return this.listaCitas;
	}
	
	public HashMap<String, Autor> getListaAutores() {
		return this.listaAutores;
	}
	
	public String getId() {
		return this.id;
	} 
	
	//public boolean contieneCita(String pId) {   Esto hace una llamada a un método de manera innecesaria
		//return this.listaCitas.containsKey(pId);
	//}

	public void anadirCita(String pId, Publicacion pPublicacion) {
		if (this.listaCitas.containsKey(pId) == false) {
			Cita cita= new Cita(pId, pPublicacion);
			this.listaCitas.put(pId, cita);
		}
	}
	
	//public boolean contieneAutor(String pId) { Esto hace una llamada a un método de manera innecesaria
		//return;
	//}

	public void anadirAutor(String pId, String pNombre) { 
		if (this.listaAutores.containsKey(pId) == false) {
			Autor autor= new Autor(pId, pNombre);
			this.listaAutores.put(pId, autor);
		}
			}

	public HashMap<String, Publicacion> getPublicacionesCitadas() {
		HashMap<String, Publicacion> lista = new HashMap<String, Publicacion>();
		Publicacion pubCitada;
		for(Cita cita : listaCitas.values()) {
			pubCitada = cita.getPublicacion();
			lista.put(pubCitada.getId(), pubCitada);
		}
		
		return lista;
	}
	
	public String getTitulo() {
		return this.titulo;
	}

	@Override
	public String toString() {
	    StringBuilder sb = new StringBuilder();

	    sb.append("ID: ").append(this.id).append("\n");
	    sb.append("Título: ").append(this.titulo).append("\n");

	    sb.append("Autores:\n");
	    for (Entry<String, Autor> autor : this.listaAutores.entrySet()) {
	        sb.append("  - ").append(autor.getValue()).append("\n"); 
	    }

	    sb.append("Citas:\n");
	    for (Map.Entry<String, Cita> cita : this.listaCitas.entrySet()) {
	        Publicacion citada = cita.getValue().getPublicacion();
	        sb.append("  - ").append(citada.getId()).append(": ").append(citada.getTitulo()).append("\n");
	    }

	    return sb.toString();
	}
}
